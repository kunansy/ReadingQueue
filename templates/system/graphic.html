{% extends 'index.html' %}

{%- block style -%}
    <link rel="stylesheet" href="{{ url_for('static', path='system/system.css') }}">
{%- endblock style -%}

{%- block header -%}
    {% from 'submenu.html' import submenu %}
    {% call submenu(('Graphic', '/system/graphics'), ('Backup', '/system/backup'), ('Restore', '/system/restore')) %}
    {% endcall %}
{%- endblock header -%}

{% block main %}

    <div class="form">
        <form action="/system/graphic" method="GET">
            <input class="input" list="reading_materials" name="material_id" value="{{ material_id }}" placeholder="Choose a material">
            <datalist id="reading_materials">
                {% for material_id, title in titles | dictsort(by='value') %}
                    <option value="{{ material_id }}"> «{{ title }}»
                {% endfor %}
            </datalist>
            <input class="input" type="number" placeholder="Enter a count of days" name="last_days" value="{{ last_days }}" title="Show last n days">
            <button type="submit" class="submit-button"> Show </button>
        </form>
    </div>

    <div class="graphic-image reading-graphic">
        <img src="data:image/png;base64,{{ graphic_image }}">
    </div>

    <div class="graphic-image trend reading-trend">
        <img src="data:image/png;base64,{{ reading_trend_image }}">

        <div class="statistics">
            <p> Total pages read: {{ reading_trend.total }} </p>
            <p> Average pages read: {{ reading_trend.average }} </p>
            <p> Median pages read: {{ reading_trend.median }} </p>
            <p> Max pages read: {{ reading_trend.max }} </p>
            <p> Min pages read: {{ reading_trend.min }} </p>
        </div>
    </div>

    <div class="graphic-image trend notes-trend">
        <img src="data:image/png;base64,{{ notes_trend_image }}">

        <div class="statistics">
            <p> Total notes inserted: {{ notes_trend.total }} </p>
            <p> Average notes inserted: {{ notes_trend.average }} </p>
            <p> Median notes inserted: {{ notes_trend.median }} </p>
            <p> Max notes inserted: {{ notes_trend.max }} </p>
            <p> Min notes inserted: {{ notes_trend.min }} </p>
        </div>
    </div>

{% endblock main%}
