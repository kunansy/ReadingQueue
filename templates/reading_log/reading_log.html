{% extends 'index.html' %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', path='reading_log/reading_log.css') }}">
{% endblock style %}

{% block header %}
    {% from 'submenu.html' import submenu %}
    {% call submenu(('Reading log', '/reading_log'), ('Add log record', '/reading_log/add-view')) %}
    {% endcall %}
{% endblock header %}

{% block main %}
{% if log %}
    {% set index = namespace(value=1) %}

    {% for date, info in log | dictsort(reverse=True) %}
        {% set count = info.count %}
        {% if count >= average_materials_read_pages[info.material_id] %}
            <div class="record success">
        {% else %}
            <div class="record error">
        {% endif %}

        <p class="counter"> {{ index.value }} / {{ loop.length }}</p>
        <p> Date: {{ date.strftime(DATE_FORMAT) }} </p>
        <p> Title: «{{ info.material_title }}» </p>
        <p> Count: {{ info.count }}</p>

        {% set index.value = index.value + 1 %}
    </div>
    {% endfor %}

    {% from 'arrows.html' import arrows %}
    {% call arrows() %}
    {% endcall %}
{%- else -%}
    {% import 'errors/not_found.html' as not_found %}
    {% call not_found.not_found('log records') %} {% endcall %}
{% endif %}
{% endblock main %}
